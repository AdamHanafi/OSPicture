function settingPicture(){var i=$(".footer");mainReady.css("top","0"),mainReady.css("left","0"),mainReady.css("right","0"),mainReady.css("bottom","0"),$("body").css("transition","background-color .2s ease-in"),$("body").css("background-color","black"),screen.width>=window.innerWidth&&(i.css("transition","bottom .2s, background-color .2s"),i.css("bottom","-40px")),i.css("background-color","rgba(0,0,0,0.7)")}function addListenerDownload(i,t){var n="picture"==t,e=$("<img />",{class:t,alt:"Image"}).attr("src",(n?"/img/":"/img_min/")+i.data("key")+"."+i.data("format")).on("load",function(){this.complete&&void 0!==this.naturalWidth&&0!=this.naturalWidth?(n&&(notifDownload=1,$(".flowspinner").length&&($(".flowspinner").remove(),$(".download-info").remove())),i.append(e[0]),n&&(picture=$(".picture"),calculateView(0,1)),setTimeout(function(){e[0].style.transition=n?transitSetting+",  max-width .2s ease-in, max-height .2s ease-in":"filter .2s ease-in, "+transitSetting,e[0].style.transform="rotateX(0deg)",e[0].style.boxShadow="none",e[0].style.opacity="1",n&&(setTimeout(function(){mainReady.css("transition","top .2s, bottom .2s, left .2s, right .2s")},40),$(window).resize(function(){calcViewRotateDeg()}))},20)):i.append($("<span />").text("Broken image"))})}function calculateView(i,t){if(isResolution=resolution[i]>resolution[t],window.innerWidth<=resolution[i]&&window.innerHeight<=resolution[t]){var n=window.innerWidth>window.innerHeight,e=(resolution[i]/resolution[t]+"").substring(0,3),o=e==(window.innerWidth/window.innerHeight+"").substring(0,3);if(isResolution&&n&&((screen.width/screen.height+"").substring(0,3)==e&&screen.width-window.innerWidth<=211&&screen.height-window.innerHeight<=211||o))return settingPicture(),resolution[0]>resolution[1]&&0==i?(picture.css("max-width","100%"),picture.css("max-height","inherit")):(picture.css("max-width","inherit"),picture.css("max-height",main.width()+50)),!0;if(!isResolution&&!n&&o)return settingPicture(),0==i?(picture.css("max-width","inherit"),picture.css("max-height","100%")):(picture.css("max-width",main.height()+465),picture.css("max-height","inherit")),!0}return!1}var notifDownload=0,rotateDeg=0,resolution,mainReady=$(".main"),transitSetting="opacity .05s, transform .2s ease-in, box-shadow .2s ease-in",isResolution;notification=$(".notification"),notification.css("display","block"),setTimeout(function(){if($("#download-picture").length)resolution=$("#resolution").text().split("x"),setTimeout(function(){void 0==picture&&0==notifDownload&&(mainReady.append($("<div/>",{class:"flowspinner"}),$("<span/>",{class:"download-info"}).text("Downloading")),notifDownload=1)},500),addListenerDownload(mainReady,"picture");else if($(".file").length)for(var i=$(".file"),t=0;t<i.length;t++)addListenerDownload($(i[t]),"image-folder")},20);