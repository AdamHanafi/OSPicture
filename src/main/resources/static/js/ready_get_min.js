function settingPicture(){main.css("overflow","hidden"),main.css("top","0"),main.css("left","0"),main.css("right","0"),main.css("bottom","0")}function addListenerDownload(i){var t=$("<img />",{class:"image-folder",alt:"Image"}).attr("src","/img_min/"+i.dataset.key+"."+i.dataset.format).on("load",function(){this.complete&&void 0!==this.naturalWidth&&0!=this.naturalWidth?(i.append(t[0]),setTimeout(function(){t[0].style.transition="opacity .05s, transform .2s ease-in, box-shadow .2s ease-in",t[0].style.transform="rotateX(0deg)",t[0].style.boxShadow="none",t[0].style.opacity="1"},100)):i.append($("<span />").text("Broken image"))})}var notifDownload=0,rotateDeg=0;if(notification=$(".notification"),notification.css("display","block"),$("#format").length){var resolution=$("#resolution").text().split("x"),notifRes=0;setTimeout(function(){void 0==picture&&0==notifDownload&&(main.append($("<div/>",{class:"flowspinner"}),$("<span/>",{class:"download-info"}).text("Downloading")),notifDownload=1)},1e3);var img=$("<img />",{class:"picture",alt:"Image"}).attr("src","/img/"+$("#picture-key").val()+"."+$("#format").data("format")).on("load",function(){if(this.complete&&void 0!==this.naturalWidth&&0!=this.naturalWidth){if(notifDownload=1,$(".flowspinner").length&&($(".flowspinner").remove(),$(".download-info").remove()),main.append(img),picture=$(".picture"),window.innerWidth<resolution[0]&&window.innerHeight<resolution[1])if(resolution[0]>resolution[1]&&window.innerWidth>window.innerHeight){for(i=1;i<11;i++)if(window.innerWidth*i>=resolution[0]){if(window.innerHeight*i<=resolution[1]){notifRes=1;break}break}1==notifRes&&(settingPicture(),picture.css("max-height","inherit"))}else if(resolution[0]<resolution[1]&&window.innerWidth<window.innerHeight){for(var i=1;i<11;i++)if(console.log(window.innerWidth*i+" // "+window.innerHeight*i+" // "+i+" // "+$(window).width()+" // "+$(window).height()),window.innerHeight*i>=resolution[1]){if(window.innerWidth*i<=resolution[0]){notifRes=1;break}break}1==notifRes&&(settingPicture(),picture.css("max-width","inherit"))}setTimeout(function(){picture.css("transform","rotateX(0deg)"),picture.css("boxShadow","none"),picture.css("opacity","1")},100)}else main.append($("<span />").text("Broken image"))})}else if($(".file").length)for(var files_pictures=$(".file"),i=0;i<files_pictures.length;i++)addListenerDownload(files_pictures[i]);